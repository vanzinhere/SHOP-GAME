<!DOCTYPE html><html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Login / Register - Auth PANN</title>
  <style>
    body {
      background: #f2f2f2;
      font-family: Arial, sans-serif;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      margin: 0;
    }.container {
  background: white;
  padding: 2em;
  border-radius: 10px;
  box-shadow: 0 0 10px rgba(0,0,0,0.1);
}

input, button {
  width: 100%;
  padding: 0.7em;
  margin-top: 0.5em;
  border: 1px solid #ccc;
  border-radius: 5px;
}

button {
  background-color: #4285f4;
  color: white;
  border: none;
  cursor: pointer;
  transition: 0.3s;
}

button:hover {
  background-color: #3367d6;
}

p {
  margin-top: 1em;
  font-size: 0.9em;
  text-align: center;
}

  </style>
</head>
<body>
  <div class="container">
    <h2 id="form-title">Login</h2><form id="authForm">
  <input type="text" id="username" placeholder="Username" style="display:none;"><br>
  <input type="email" id="email" placeholder="Email" required><br>
  <input type="password" id="password" placeholder="Password" required><br>
  <button type="submit" id="submitBtn">Login</button>
</form>

<p id="result"></p>
<p id="toggleText">Belum punya akun? <a href="#" id="toggleLink">Daftar</a></p>

  </div>  <script>
    const form = document.getElementById('authForm');
    const toggleLink = document.getElementById('toggleLink');
    const toggleText = document.getElementById('toggleText');
    const formTitle = document.getElementById('form-title');
    const usernameInput = document.getElementById('username');
    const emailInput = document.getElementById('email');
    const passwordInput = document.getElementById('password');
    const submitBtn = document.getElementById('submitBtn');
    const resultText = document.getElementById('result');

    let isLogin = true;

    toggleLink.addEventListener('click', () => {
      isLogin = !isLogin;
      if (isLogin) {
        formTitle.textContent = 'Login';
        usernameInput.style.display = 'none';
        submitBtn.textContent = 'Login';
        toggleText.innerHTML = 'Belum punya akun? <a href="#" id="toggleLink">Daftar</a>';
      } else {
        formTitle.textContent = 'Register';
        usernameInput.style.display = 'block';
        submitBtn.textContent = 'Register';
        toggleText.innerHTML = 'Sudah punya akun? <a href="#" id="toggleLink">Login</a>';
      }
    });

    form.addEventListener('submit', async (e) => {
      e.preventDefault();
      const email = emailInput.value;
      const password = passwordInput.value;
      const username = usernameInput.value;

      const endpoint = isLogin ? 'https://just-marmot-patient.ngrok-free.app/login' : 'https://just-marmot-patient.ngrok-free.app/register';
      const body = isLogin
        ? `email=${encodeURIComponent(email)}&password=${encodeURIComponent(password)}`
        : `username=${encodeURIComponent(username)}&email=${encodeURIComponent(email)}&password=${encodeURIComponent(password)}`;

      const res = await fetch(endpoint, {
        method: 'POST',
        headers: {
          'Content-Type': 'application/x-www-form-urlencoded'
        },
        body: body
      });

      if (res.ok) {
        const data = isLogin ? await res.json() : await res.text();
        resultText.textContent = isLogin ? 'Login sukses! Token: ' + data.token : 'Register sukses! Silakan cek email untuk verifikasi.';
      } else {
        resultText.textContent = 'Gagal. Cek kembali input kamu.';
      }
    });
  </script></body>
</html>
